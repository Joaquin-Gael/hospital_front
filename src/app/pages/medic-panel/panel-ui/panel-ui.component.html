<div class="panel-ui" [ngClass]="{
  'panel-ui--sidebar-collapsed': isSidebarCollapsed,
  'panel-ui--sidebar-mobile-open': isSidebarMobileOpen
}">
  <div 
    class="panel-ui__overlay" 
    *ngIf="isSidebarMobileOpen" 
    (click)="closeMobileSidebar()"
    [@fadeInOut]>
  </div>

  <aside class="panel-ui__sidebar" [@slideInOut]>
    <div class="panel-ui__sidebar-header">
      <div class="panel-ui__logo" [class.panel-ui__logo--collapsed]="isSidebarCollapsed">
        <span class="panel-ui__logo-text" *ngIf="!isSidebarCollapsed">Hospital SDLG</span>
      </div>
      
      <button 
        class="panel-ui__sidebar-toggle" 
        (click)="toggleSidebar()"
        [class.panel-ui__sidebar-toggle--collapsed]="isSidebarCollapsed"
        *ngIf="!isMobileView">
        <mat-icon>{{ isSidebarCollapsed ? 'menu_open' : 'menu' }}</mat-icon>
      </button>
    </div>

    <nav class="panel-ui__nav">
      <ul class="panel-ui__menu">
        <li *ngFor="let item of menuItems" class="panel-ui__menu-item">
          <a 
            [routerLink]="item.route"
            routerLinkActive="panel-ui__menu-link--active"
            class="panel-ui__menu-link"
            (click)="navigateTo(item.route)"
            [class.panel-ui__menu-link--collapsed]="isSidebarCollapsed"
            [attr.aria-label]="item.label">
            <div class="panel-ui__menu-icon">
              <mat-icon>{{ item.icon }}</mat-icon>
            </div>
            <span class="panel-ui__menu-label" *ngIf="!isSidebarCollapsed">{{ item.label }}</span>
          </a>
        </li>
      </ul>
    </nav>

    <div class="panel-ui__sidebar-footer">
      <div class="panel-ui__user">
        <button 
          class="panel-ui__logout" 
          (click)="onLogout()"
          [class.panel-ui__logout--collapsed]="isSidebarCollapsed"
          [attr.aria-label]="isSidebarCollapsed ? 'Cerrar sesión' : ''">
          <div class="panel-ui__user-avatar">
            <mat-icon>account_circle</mat-icon>
          </div>
          <div class="panel-ui__user-info" *ngIf="!isSidebarCollapsed">
            <span class="panel-ui__user-name">Dr. </span>
            <span class="panel-ui__logout-text">Cerrar sesión</span>
          </div>
          <mat-icon>logout</mat-icon>
        </button>
      </div>
    </div>
  </aside>

  <div class="panel-ui__main" [class.panel-ui__main--sidebar-collapsed]="isSidebarCollapsed">
    <header class="panel-ui__header" *ngIf="isMobileView">
      <div class="panel-ui__header-left">
        <button 
          class="panel-ui__mobile-menu" 
          (click)="toggleMobileSidebar()"
          [attr.aria-label]="'Abrir menú'">
          <mat-icon>menu</mat-icon>
        </button>
        <h1 class="panel-ui__title">Panel Médico</h1>
      </div>
    </header>

    <main class="panel-ui__content">
      <ng-content></ng-content>
    </main>
  </div>
</div>