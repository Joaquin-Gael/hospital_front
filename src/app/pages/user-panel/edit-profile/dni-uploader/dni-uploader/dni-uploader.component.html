<div class="dni-uploader">
  <h3 class="dni-uploader__title">Verificaci√≥n de DNI</h3>
  <p class="dni-uploader__description">
    Sube las im√°genes del frente y dorso de tu DNI para completar la verificaci√≥n de identidad.
  </p>

  <div class="dni-uploader__container">
    <!-- Zona de frente del DNI -->
    <div class="dni-uploader__section">
      <h4 class="dni-uploader__section-title">Frente del DNI</h4>
      
      <div 
        class="dni-uploader__dropzone"
        [class.dni-uploader__dropzone--dragging]="isDraggingFront"
        [class.dni-uploader__dropzone--error]="frontDni && !frontDni.isValid"
        [class.dni-uploader__dropzone--success]="frontDni && frontDni.isValid"
        (dragover)="onDragOverFront($event)"
        (dragleave)="onDragLeaveFront($event)"
        (drop)="onDropFront($event)"
        (click)="triggerFileInput('front')">
        
        <div class="dni-uploader__dropzone-content" *ngIf="!frontDni">
          <div class="dni-uploader__icon">üìÑ</div>
          <p class="dni-uploader__dropzone-text">
            <strong>Haz clic aqu√≠</strong> o arrastra la imagen del frente
          </p>
          <p class="dni-uploader__dropzone-subtext">
            JPEG o PNG, m√°ximo 5MB
          </p>
        </div>

        <div class="dni-uploader__preview" *ngIf="frontDni">
          <img 
            *ngIf="frontDni.isValid && frontDni.preview" 
            [src]="frontDni.preview" 
            alt="Preview frente DNI"
            class="dni-uploader__preview-image"
          />
          <div class="dni-uploader__preview-error" *ngIf="!frontDni.isValid">
            <div class="dni-uploader__error-icon">‚ö†Ô∏è</div>
            <p class="dni-uploader__error-text">{{ frontDni.errorMessage }}</p>
          </div>
          <button 
            type="button"
            class="dni-uploader__remove-btn"
            (click)="removeFile('front'); $event.stopPropagation()"
            title="Eliminar imagen">
            ‚úï
          </button>
        </div>
      </div>

      <input 
        type="file" 
        id="front-file-input"
        class="dni-uploader__file-input"
        accept=".jpg,.jpeg,.png"
        (change)="onFileSelected($event, 'front')"
      />
    </div>

    <!-- Zona de dorso del DNI -->
    <div class="dni-uploader__section">
      <h4 class="dni-uploader__section-title">Dorso del DNI</h4>
      
      <div 
        class="dni-uploader__dropzone"
        [class.dni-uploader__dropzone--dragging]="isDraggingBack"
        [class.dni-uploader__dropzone--error]="backDni && !backDni.isValid"
        [class.dni-uploader__dropzone--success]="backDni && backDni.isValid"
        (dragover)="onDragOverBack($event)"
        (dragleave)="onDragLeaveBack($event)"
        (drop)="onDropBack($event)"
        (click)="triggerFileInput('back')">
        
        <div class="dni-uploader__dropzone-content" *ngIf="!backDni">
          <div class="dni-uploader__icon">üìÑ</div>
          <p class="dni-uploader__dropzone-text">
            <strong>Haz clic aqu√≠</strong> o arrastra la imagen del dorso
          </p>
          <p class="dni-uploader__dropzone-subtext">
            JPEG o PNG, m√°ximo 5MB
          </p>
        </div>

        <div class="dni-uploader__preview" *ngIf="backDni">
          <img 
            *ngIf="backDni.isValid && backDni.preview" 
            [src]="backDni.preview" 
            alt="Preview dorso DNI"
            class="dni-uploader__preview-image"
          />
          <div class="dni-uploader__preview-error" *ngIf="!backDni.isValid">
            <div class="dni-uploader__error-icon">‚ö†Ô∏è</div>
            <p class="dni-uploader__error-text">{{ backDni.errorMessage }}</p>
          </div>
          <button 
            type="button"
            class="dni-uploader__remove-btn"
            (click)="removeFile('back'); $event.stopPropagation()"
            title="Eliminar imagen">
            ‚úï
          </button>
        </div>
      </div>

      <input 
        type="file" 
        id="back-file-input"
        class="dni-uploader__file-input"
        accept=".jpg,.jpeg,.png"
        (change)="onFileSelected($event, 'back')"
      />
    </div>
  </div>

  <!-- Bot√≥n de env√≠o -->
  <div class="dni-uploader__actions">
    <button 
      type="button"
      class="dni-uploader__submit-btn"
      [class.dni-uploader__submit-btn--disabled]="!canSubmit"
      [disabled]="!canSubmit"
      (click)="onSubmit()">
      {{ isSubmitting ? 'Enviando...' : 'Enviar para verificaci√≥n' }}
    </button>
    
    <p class="dni-uploader__status" *ngIf="frontDni?.isValid && backDni?.isValid">
      ‚úì Ambas im√°genes est√°n listas para enviar
    </p>
    
    <p class="dni-uploader__status dni-uploader__status--warning" *ngIf="!canSubmit && (frontDni || backDni)">
      {{ !frontDni ? 'Falta la imagen del frente' : !backDni ? 'Falta la imagen del dorso' : 'Verifica que las im√°genes sean v√°lidas' }}
    </p>
  </div>
</div>