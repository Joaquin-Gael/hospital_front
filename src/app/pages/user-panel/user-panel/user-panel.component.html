<div class="dashboard" [class.sidebar-open]="sidebarOpen">
  <app-sidebar
    [user]="user"
    [isOpen]="sidebarOpen"
    [isCollapsed]="sidebarCollapsed"
    (logout)="onLogout()"
    (close)="onCloseSidebar()"
  ></app-sidebar>
  
  <div class="main-content">
    <app-header
      (editProfile)="onEditProfile()"
      (cancelEdit)="onCancelEdit()"
      (saveProfile)="onSaveProfile()"
      (toggleSidebar)="onToggleSidebar()"
    ></app-header>
    
    <main class="content">
      @if (loading) {
        <app-loading-spinner message="Cargando panel de usuario..."></app-loading-spinner>
      } @else if (error) {
        <div class="error-state">
          <div class="error-state__icon">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.664-.833-2.464 0L4.732 16.5c-.77.833.192 2.5 1.732 2.5z" />
            </svg>
          </div>
          <h2>Error al cargar</h2>
          <p>{{ error }}</p>
          <button class="btn btn--primary" (click)="onRetry()">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
            </svg>
            Reintentar
          </button>
        </div>
      } @else {
        <router-outlet></router-outlet>
      }
    </main>
  </div>
</div>